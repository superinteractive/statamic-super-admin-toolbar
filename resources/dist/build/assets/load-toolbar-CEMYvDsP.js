function c(){const e=document.getElementById("super-admin-toolbar-context-json");if(!e)return{};const t=e.textContent.trim();if(t.length===0)return{};try{return JSON.parse(t)}catch(n){return console.error("Super Admin Toolbar: invalid JSON in context tag.",n),{}}}function s(e){document.body.insertAdjacentHTML("beforeend",e)}function d(e){const t=document.createElement("link");t.setAttribute("rel","stylesheet"),t.setAttribute("href",e),document.head.appendChild(t)}function l(e){const t=document.createElement("script");t.setAttribute("type","module"),t.setAttribute("src",e),t.onload=function(){typeof SuperAdminToolbar<"u"?new SuperAdminToolbar().init():console.error("SuperAdminToolbar class not found after loading script.")},t.onerror=function(){console.error("Failed to load toolbar script:",e)},document.body.appendChild(t)}async function u(){if(document.getElementById("super-admin-toolbar"))return;const t=c(),n=new URLSearchParams;Object.entries(t).forEach(([a,i])=>{n.append(a,i)});const r=await fetch(`/super-admin-toolbar?${n.toString()}`,{method:"GET",headers:{Accept:"application/json"},credentials:"same-origin"});if(!r.ok)throw new Error(`HTTP error. Status: ${r.status}`);const o=await r.json();!o||o.authenticated===!1||(o.html&&s(o.html),o.css&&d(o.css),o.js&&l(o.js))}document.addEventListener("DOMContentLoaded",function(){u().catch(function(e){e!=="unauthorized"&&console.error("Error loading Super Admin Toolbar:",e)})});
