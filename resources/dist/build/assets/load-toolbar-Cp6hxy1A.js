function i(){const t=document.querySelector('meta[name="csrf-token"]');return t?t.getAttribute("content"):""}function c(t){let e=document.querySelector('meta[name="csrf-token"]');e||(e=document.createElement("meta"),e.setAttribute("name","csrf-token"),document.head.appendChild(e)),e.setAttribute("content",t)}function a(t){window.livewireScriptConfig&&(window.livewireScriptConfig.csrf=t),window.Livewire&&(typeof window.Livewire.updateCsrfToken=="function"?window.Livewire.updateCsrfToken(t):"csrfToken"in window.Livewire&&(window.Livewire.csrfToken=t))}function s(t){const n=`; ${document.cookie}`.split(`; ${t}=`);return n.length===2?n.pop().split(";").shift():null}function d(t){let e=t.headers.get("x-csrf-token");if(e||(e=t.headers.get("X-CSRF-TOKEN")),!e){const n=s("XSRF-TOKEN");n!==null&&(e=decodeURIComponent(n))}return e}function u(){const t=document.getElementById("super-admin-toolbar-context-json");if(!t)return{};const e=t.textContent.trim();if(e.length===0)return{};try{return JSON.parse(e)}catch(n){return console.error("Super Admin Toolbar: invalid JSON in context tag.",n),{}}}function l(t){document.body.insertAdjacentHTML("beforeend",t)}function f(t){const e=document.createElement("link");e.setAttribute("rel","stylesheet"),e.setAttribute("href",t),document.head.appendChild(e)}function m(t){const e=document.createElement("script");e.setAttribute("type","module"),e.setAttribute("src",t),e.onload=function(){typeof SuperAdminToolbar<"u"?new SuperAdminToolbar().init():console.error("SuperAdminToolbar class not found after loading script.")},e.onerror=function(){console.error("Failed to load toolbar script:",t)},document.body.appendChild(e)}async function p(){if(document.getElementById("super-admin-toolbar"))return;const e=u(),n=await fetch("/super-admin-toolbar",{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json","X-CSRF-TOKEN":i()},credentials:"same-origin",body:JSON.stringify(e)}),r=d(n);if(r&&(c(r),a(r)),!n.ok)throw new Error(`HTTP error. Status: ${n.status}`);const o=await n.json();!o||o.authenticated===!1||(o.html&&l(o.html),o.css&&f(o.css),o.js&&m(o.js))}document.addEventListener("DOMContentLoaded",function(){p().catch(function(t){t!=="unauthorized"&&console.error("Error loading Super Admin Toolbar:",t)})});
